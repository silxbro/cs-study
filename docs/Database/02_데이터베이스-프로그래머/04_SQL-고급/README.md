# SQL 고급
<br/>

- 내장 함수의 의미를 알아보고 자주 사용되는 내장 함수 몇 가지를 직접 실습해본다.
- 부속질의의 의미와 종류를 알아보고 직접 실습해본다.
- 뷰의 의미를 알아보고 뷰를 직접 생성, 수정, 삭제해본다.
- 데이터베이스의 저장 구조와 인덱스의 관계를 알아보고 인덱스를 직접 생성, 수정, 삭제해본다.

SQL 기초 문법은 기본적인 데이터베이스 운영에 충분히 사용 가능하나, 업무가 복잡해지고 처리해야 할 자료가 많아지면 기능에 한계가 있다.
이 장에서는 복잡한 질의를 해결할 때 사용하는 SQL 고급 문법에 대해 알아본다.
먼저 내장 함수(built-in function)에 대해 알아보고, 3장에서 배운 부속질의를 SQL 문 위치에 따라 세분화시켜 알아본다.
그리고 일종의 가상 테이블인 뷰와 데이터를 쉽고 빠르게 찾을 수 있도록 만든 인덱스에 대해서도 알아본다.

### 01 : 내장 함수
사용자가 만든 함수에 대비되는 용어로 DBMS에서 제공하는 함수이다. 상수나 열 이름을 입력 값으로 받아 호출되며, 단일 값을 결과로 반환한다.

### 02 : 부속질의
하나의 SQL 문 안에 다른 SQL 문이 중첩된 형태로 표현되는 질의를 말한다. 다른 테이블에서 가져온 데이터로 현재 테이블에 있는 정보를 찾거나 가공하는 데 사용한다.
- 스칼라 부속질의 : SELECT 절에서 사용되는 부속질의로 단일 행, 단일 열의 스칼라 값을 반환한다.
- 인라인 뷰 : FROM 절에서 사용되는 부속질의로 결과를 뷰 형태로 반환한다.
- 중첩질의 : WHERE 절에서 사용되는 부속질의로 주질의에 사용된 자료 집합의 조건을 서술한다.

### 03 : 뷰
하나 이상의 테이블을 합하여 사용하기 편리하게 만든 가상의 테이블이다. 뷰의 장점은 다음과 같다.
- 편리성 및 재사용성
    - 사용자가 필요한 정보만 요구에 맞게 가공하여 뷰로 만들어 쓸 수 있다. 자주 사용되는 질의를 뷰로 미리 정의해 놓을 수 있다.
- 보안성
    - 각 사용자별로 보안이 필요한 데이터를 제외 후 선별하여 보여줄 수 있다.
- 독립성
    - 논리 데이터베이스의 원본 테이블의 구조가 변해도 응용 프로그램에 영향을 주지 않도록 한다.

### 04 : 인덱스
도서의 색인이나 사전과 같이 데이터를 쉽고 빠르게 찾을 수 있도록 만든 데이터 구조이다.

### 05 : B-tree
루트 노드, 내부 노드, 리프 노드로 구성된 트리 자료구조로, 리프 노드가 모두 같은 레벨에 존재하는 균형 트리이다.

### 06 : MySQL 인덱스의 종류
- 클러스터 인덱스
    - 기본적인 인덱스로 테이블 생성 시 기본키를 지정하면 기본키에 대하여 클러스터 인덱스를 생성한다.
- 보조 인덱스
    - 클러스터 인덱스가 아닌 모든 인덱스는 보조 인덱스이며 보조 인덱스의 각 레코드는 보조 인덱스 속성과 기본키 속성 값을 갖고 있다.
      보조 인덱스를 검색하여 기본키 속성 값을 찾은 다음 클러스터 인덱스로 가서 해당 레코드를 찾는다.