# 데이터베이스 관리의 개요
<br/>

데이터베이스를 잘 활용하는 것만큼 안전하게 관리하는 것은 중요하다. 또 저장된 데이터에 문제가 생길 때를 대비하여 백업과 복원에도 항상 관심을 가져야 한다.
이 절에서는 데이터베이스 관리의 중요성을 짚어보고, 데이터베이스 관리 업무에는 무엇이 있는지 알아본다.
<br/>
<br/>
## 1. 데이터베이스 관리의 중요성
데이터베이스를 안정적으로 운영을 하기 위해서는 적절한 관리가 필요하며 시스템 전반에 대해 숙지하고 있는 인력도 필요하다.
그래야만 예상 가능한 다양한 부분에 대해 미리 점검하고 상황이 발생했을 때 조치를 취할 수 있다.
수많은 시간과 비용을 투자해 개발한 데이터베이스가 제대로 관리되지 않으면 기업 입장에서도 손실이 크다.

아래 그림은 데이터베이스 운영 환경을 도식화한 것이다.
데이터베이스는 하드웨어(각종 장비), 소프트웨어(운영체제, DBMS 등), 네트워크(스위치, 라우터 등) 등이 복합적으로 연결되어 운영된다(실제 시스템은 이보다 훨씬 더 복잡하다).
만약 이 중에서 어느 하나라도 문제가 생기면 서비스는 중지되거나 차질을 빚는다.
예를 들어 데이터베이스 서버는 정상적으로 동작하는데 네트워크 장비에 문제가 생긴다면 최종 사용자인 고객이나 판매원이 데이터베이스에 접근하지 못해 서비스를 받을 수 없게 된다.
#### [데이터베이스 운영 환경]
<img src="https://github.com/silxbro/cs-study/assets/142463332/554a0b1e-3180-4c53-8487-fcae77ed1d1a" width="380" height="350"/><br/>

안정적인 서비스를 제공하기 위해서 각 기업들은 네트워크, 하드웨어, DBMS 등 중요 부문에 엔지니어를 두어 정기적으로 관리한다.
여러 엔지니어 중 데이터베이스를 관리하는 사람을 DBA(Database Administrator)라고 한다.
DBA는 기본적으로 데이터베이스 구축부터 운영까지 데이터베이스 시스템의 이상 유무를 점검하고 유지보수를 하여 시스템에 문제가 발생했을 때 신속하게 대처한다.
<br/>
<br/>
## 2. 데이터베이스 관리 업무
DBA는 운영하는 DBMS의 세부적인 사항까지 정확하게 알고 있어야 한다. 데이터베이스 관리를 위해 필요한 일반적인 업무를 소개하면 다음과 같다.

#### 🔳 서비스 관리
DBMS는 일종의 서비스를 제공하는 소프트웨어이다. DBMS는 동시에 여러 사용자가 접근하여 데이터를 읽고 쓰기 때문에 시스템이 다운되는 일이 없도록 관리해야 한다.

#### 🔳 점검 및 모니터링
데이터베이스 시스템은 대부분 365일 24시간 운영되는 경우가 많다. 시스템의 이러한 특성상 지속적인 모니터링을 통해 문제가 발생하기 전에 조치하는 것이 중요하다.
경우에 따라서는 시스템을 중단하고 주기적으로 정밀 점검을 할 필요도 있다.

#### 🔳 장애 대체
시스템 운영 중에는 불가피하게 장애가 발생할 수 있다. 예를 들어 전력 문제로 서버가 강제로 종료될 수도 있고, DBMS에 접속하는 응용 소프트웨어에 문제가 생길 수도 있다.
드물지만 DBMS 프로그램 자체의 버그(bug)로 인해 장애가 발생할 수 있다. 이러한 장애가 발생하면 각 경우에 맞게 신속·정확하게 대처해야 한다.

#### 🔳 백업과 복원
데이터베이스를 운영하는 주 목적은 기업이나 단체의 정보 관리에 있다. 데이터베이스에 저장된 정보가 시스템 장애나 사용자 부주의 등으로 유실되거나 삭제될 경우 그 피해는 엄청나다.
이에 대비하여 DBMS의 주요 데이터 파일은 주기적으로 백업을 해 두어야 한다. 일상적으로 해야 하는 작업이기 때문에 꼭 알고 있어야 한다.

#### 🔳 사용자 관리 및 권한 관리
정보의 중요성에 따라 그 정보에 접근할 수 있는 사용자와 접근할 수 없는 사용자를 구분할 필요가 있다. DBMS는 사용자의 데이터 접근과 사용에 관한 권한을 지정할 수 있다.
로그인 사용자 관리와 권한 관리는 DBMS의 기본 기능이다.

#### 🔳 시스템 데이터베이스 관리
DBMS는 DBMS의 운영정보를 담고 있는 시스템 데이터베이스를 가지고 있다. 시스템 데이터베이스가 잘못 관리되면 DBMS가 오작동하는 등의 문제가 생길 수 있다.

#### 🔳 사용자 데이터베이스 관리
DBMS 시스템 기준으로 사용자 데이터베이스는 우리가 지금까지 살펴왔던 데이터베이스를 말한다(예를 들면 마당서점 데이터베이스가 있다).
사용자 데이터베이스는 경우에 따라 하나의 DBMS에 여러 개가 운영될 수 있다. 이와 관련하여 데이터베이스 생성 작업 및 관리가 필요하다.

#### 🔳 데이터베이스 저장 공간 관리
데이터베이스가 꾸준히 운영되면 당연히 데이터의 증가에 비례하여 하드디스크 공간 역시 늘어나야 한다.
만약 하드디스크가 데이터 증가에 충분히 대처하지 못한다면 데이터베이스 시스템은 데이터를 저장하지 못하고 중단될 것이다.

#### 🔳 인덱스 관리
데이터베이스가 꾸준히 운영되면 저장된 테이블들도 꾸준히 삭제되고 입력되고 수정된다. 이러한 작업이 반복되면 인덱스(index)도 수정해야 한다.
인덱스는 B-tree 형태로 저장되어 균형을 유지하려고 하는데, 새로운 데이터가 입력되면 새로운 노드를 만들고 분할한다.
이 과정에서 노드의 중간에 있는 데이터가 삭제되면 하드디스크의 저장 공간에 단편화가 발생하여 인덱스의 성능이 떨어진다.
따라서 일정한 기준을 넘어서는 인덱스의 경우 재구축 작업을 수행하여 단편화 문제를 해결해야 한다.

위에서 소개한 업무를 수행하기 위해서 DBA는 자신이 운영하는 DBMS에 대해 세부적인 사항까지 정확히 알고 있어야 한다.
또 관련된 운영체제나 네트워크 등 전방위적인 지식을 습득하여야 한다.
<br/>
<br/>
## 3. 데이터베이스 관리 기본 명령어 실습
DBA는 DBMS의 자원을 파악하는 명령어를 알고 잘 사용해야 한다. MySQL 데이터베이스의 몇 가지 기본 명령어를 살펴보자.

#### [질의 9-1] (root 계정으로) 시스템에 있는 데이터베이스 현황을 살펴보시오.
- DB에 있는 데이터베이스가 어떤 것이 있는지 보여준다. 기본적으로 mysql, sys 등 관리용 데이터베이스를 확인할 수 있다.
  ```SQL
  SHOW DATABASES;
  ```

  <img src="https://github.com/silxbro/cs-study/assets/142463332/c7264fe1-295a-44e7-8f0d-96866593407d" width="120" height="180"/><br/>

- 데이터베이스 mysql을 사용하는 명령을 내린다.
  ```SQL
  USE mysql;
  ```

- 데이터베이스 mysql에 있는 테이블들을 보여준다.
  ```SQL
  SHOW TABLES;
  ```

  <img src="https://github.com/silxbro/cs-study/assets/142463332/a54e448e-93ef-4449-9fe3-8b5501902f5a" width="130" height="230"/><br/>

- 사용자 정보를 저장하는 User 테이블의 구조를 살펴본다.
  ```SQL
  DESC User;
  ```

  <img src="https://github.com/silxbro/cs-study/assets/142463332/df3a5bee-3a1c-42f7-8acd-53e3e0d50bfc" width="350" height="280"/><br/>

- 사용자 계정 테이블 User의 내용을 확인하고 사용자 계정을 살펴본다.
  ```SQL
  SELECT * FROM User;
  ```

  <img src="https://github.com/silxbro/cs-study/assets/142463332/62d733d0-18cf-49c9-87ad-6ba63e484719" width="600" height="160"/><br/>