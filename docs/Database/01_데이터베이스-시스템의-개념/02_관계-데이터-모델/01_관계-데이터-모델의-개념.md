# 관계 데이터 모델의 개념
<br/>

관계 데이터 모델은 1970년대 IBM 연구소에서 근무하던 수학자 에드가 코드(E. F. Codd) 박사가 제안했다.
이 모델은 수학의 집합이론에 근거하고 있어 타 모델에 비해 튼튼한 이론적인 토대를 갖고 있다.
또한 관계 데이터 모델이 적용된 SQL 언어는 비절차적인 언어로 원하는 데이터를 쉽게 표현하는 장점이 있다.
현재 많이 사용되는 관계 데이터 모델 DBMS로는 Oracle, SQL Server, DB2, MySQL, PostgreSQL과 모바일용인 SQLite 등이 있다.

#### 관계 데이터 모델의 발표
코드(Codd) 박사(1923~2003)sms 1970년 관계 데이터 모델을 제안한 논문 'A Relational Model of Data for Large Shared Data Banks'를 발표하였다.
IBM은 처음에 계층 데이터 모델인 IMS를 판매하는 데 주력하기 위해 Codd 박사의 제안을 받아들이지 않았으나 나중에 'System R'이라는 이름으로 관계 데이터베이스를 만들었다.
<br/>
<br/>
## 1. 릴레이션
관계 데이터 모델을 이해하기 위해서는 우선 가장 중요한 용어인 `릴레이션`에 대한 이해가 필요하다. 릴레이션(relation)은 행과 열로 구성된 테이블을 말한다.
relation은 사전적으로 '관계', '친척' 등을 의미한다.
영어 relation은 우리말로 '관계'라고 해야 하지만 뒤에 배울 용어 relationship을 '관계'라고 하기 때문에 번역의 충돌을 피하기 위해여 '릴레이션' 그대로 부른다.
그러나 다른 용어에 포함된 relation은 그대로 '관계'로 번역하여 relational data model, relational database 등은 '관계 데이터 모델', '관계 데이터베이스'라고 한다.
다음은 relation에 관련된 한글 번역 용어들이다.

#### [relation과 관련된 한글 용어]
|용어|한글 용어|비고|
|:---|:---|:---|
|relation|릴레이션, 테이블|'관계'라고 하지 않음|
|relational data model|관계 데이터 모델||
|relational database|관계 데이터베이스||
|relational algebra|관계대수||
|relationship|관계||

릴레이션을 이해하기 위해 도서 5권에 대한 데이터가 있다고 가정하자. 이 데이터를 저장하는 가장 쉬운 방법은 다음 그림과 같이 테이블 형태로 저장하는 것이다.
테이블은 릴레이션의 시각적인 표현 방법이다.

#### [데이터와 테이블(릴레이션)]
<img src="https://github.com/silxbro/cs-study/assets/142463332/dd3f358b-ca4b-4d43-9178-f91bf34e9760" width="550" height="170"/><br/>

릴레이션은 수학의 집합에서 나온 개념이다. 위의 도서 릴레이션의 경우 네 개의 집합 도서번호, 도서이름, 출판사, 가격으로 구성되어 있으며, 각 집합은 다음과 같은 원소를 갖고 있다.

도서번호 = {1, 2, 3, 4, 5}<br/>
도서이름 = {축구의 역사, 축구아는 여자, 축구의 이해, 골프 바이블, 피겨 교본}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;출판사 = {굿스포츠, 나무수, 대한미디어}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;가격 = {7000, 13000, 22000, 35000, 8000}

예를 들어 첫 번째 행 (1, 축구의 역사, 굿스포츠, 7000)의 경우 네 개의 집합에서 각각 원소 한 개씩 선택하여 만들어진 것으로 이 원소들이 관계(relationship)를 맺고 있다.
도서 릴레이션은 이러한 관계 다섯 개가 모여 생성된 것이다. 관계를 맺는 방법은 집합 연산인 **카티전 프로덕트**(연산자 기호 `⨉`)를 사용한다.

관계(relationship)는 두 가지 개념으로 볼 수 있다. 첫 번째는 릴레이션 내에서 생성되는 관계이며 두 번째는 릴레이션 간에 생성되는 관계이다.<br/>
첫 번째 관계는 앞에서 설명한 것과 같이 '**릴레이션 내 데이터들의 관계**'로 관련 있는 실제 데이터들의 집합으로 이루어진다.<br/>
두 번째 관계는 '**릴레이션 간의 관계**'로 한 릴레이션에서 다른 릴레이션으로 식별 가능한 값을 이용하여 연결한다.
예를 들어 도서, 주문, 고객 릴레이션이 있다고 가정하면 도서 릴레이션의 '도서번호'와 고객 릴레이션의 '고객번호'를 주문 릴레이션에 저장함으로써 표현한다.
두 번째 '릴레이션 간의 관계'는 관계 데이터 모델을 다른 데이터 모델과 구분하는 특징이 된다.
<br/>
<br/>
## 2. 릴레이션 스키마와 인스턴스
릴레이션은 스키마와 인스턴스로 이루어진다. 스키마(schema)는 관계 데이터베이스의 릴레이션이 어떻게 구성되는지 어떤 정보를 담고 있는지에 대한 기본적인 구조를 정의한다.
테이블에서 스키마는 테이블의 첫 행인 헤더(header)에 나타나며 각 데이터의 특징을 나타내는 속성, 자료 타입 등의 정보를 담고 있다.
인스턴스(instance)는 정의된 스키마에 따라 테이블에 실제로 저장되는 데이터의 집합을 의미한다.

#### [도서 릴레이션]
<img src="https://github.com/silxbro/cs-study/assets/142463332/5ba9a9b8-6592-4129-a7e0-41095745033e" width="600" height="230"/><br/>
- 도서 릴레이션을 보면 도서번호, 도서이름, 출판사, 가격은 릴레이션의 데이터 구조이며, 도서 다섯 권은 릴레이션에 저장된 데이터이다.
  이러한 도서 릴레이션의 데이터 구조를 스키마라 하며 저장된 데이터를 인스턴스라고 한다.

### 릴레이션 스키마
릴레이션 스키마는 릴레이션에 어떤 정보가 담길지를 정의한다. 도서 릴레이션은 도서번호, 도서이름, 출판사, 가격이라는 정보를 정의하고 있는데, 각 열을 **속성**(attribute)이라고 한다.
속성에는 각각의 이름이 있으며 우리는 그 이름을 보고 어떤 정보가 담기는지 알 수 있다.
하지만 컴퓨터로 처리되는 과정에서 데이터베이스 속성 이름만으로 어떤 형태의 자료가 있는지 알 수 없다.
따라서 각 속성들이 어떤 값을 가질 수 있는지를 **도메인**(domain)이라는 용어를 사용하여 정의한다.
또한 릴레이션이 몇 개의 속성을 가지는가를 나타내기 위해 **차수**(degree)라는 용어를 사용한다.

- **속성** : 릴레이션 스키마의 열
- **도메인** : 속성이 가질 수 있는 값의 집합
- **차수** : 속성의 개수

도서 릴레이션의 경우 차수는 4이다. 그리고 첫 번째 속성 도시번호의 도메인은 1보다 큰 정수의 집합이며, 두 번째 속성 도서이름의 도메인은 문자 집합이다.

릴레이션 스키마는 `릴레이션 이름(속성 1, 속성 2, 속성 3, ...)`과 같이 표기한다.
혹은 속성과 도메인을 같이 써서 `릴레이션 이름(속성 1: 도메인 1, 속성 2: 도메인 2, 속성 3: 도메인 3, ...)`와 같이 표기하기도 한다.
도서 릴레이션 스키마는 다음과 같이 표기할 수 있다.
```
  도서(도서번호, 도서이름, 출판사, 가격)
```
관계 데이터베이스 스키마는 여러 릴레이션 스키마들의 집합으로 구성된다.

### 릴레이션 인스턴스
릴레이션 인스턴스는 릴레이션 스키마에 실제로 저장된 데이터의 집합이다. 도서 릴레이션을 보면 도서번호가 1부터 5까지 총 다섯 권의 데이터가 저장된 것을 알 수 있다.
릴레이션에서 한 행을 **튜플**(tuple)이라고 부른다. 튜플은 릴레이션 인스턴스의 각각의 행을 나타낸다.
각 튜플의 속성 값은 릴레이션 스키마에서 정의한 도메인 값으로 구성되며 튜플이 가지는 속성의 개수는 릴레이션 스키마의 차수와 동일하다.
또한 릴레이션 내의 모든 튜플들은 서로 중복되지 않아야 한다. 릴레이션에 저장된 튜플의 수를 **카디날리티**(cardinality)라고 한다.
카디날리티는 튜플의 삽입, 삭제, 수정 등에 따라 수시로 변한다.

- **튜플** : 릴레이션의 행
- **카디날리티** : 튜플의 수

도서 릴레이션의 세 번째 튜플을 보면 도서번호는 3, 도서이름은 '축구의 이해', 출판사는 '대한미디어', 가격은 22,000원이다. 또한 다섯 개의 튜플은 각각 다른 내용을 가지고 있다.
도서 릴레이션의 카디날리티는 5이다.

지금까지 릴레이션 구조에 관한 용어를 살펴보았다. 다음 표는 이들 용어와 같은 의미로 통용되는 용어, 그리고 이에 상응하는 파일 시스템 용어를 정리한 것이다.

#### [릴레이션 구조와 관련된 용어]
|릴레이션 용어|같은 의미로 통용되는 용어|파일 시스템 용어|
|:---|:---|:---|
|릴레이션(relation)|테이블(table)|파일(file)|
|스키마(schema)|내포(intension)|헤더(header)|
|인스턴스(instance)|외연(extension)|데이터(data)|
|튜플(tuple)|행(row)|레코드(record)|
|속성(attribute)|열(column)|필드(field)|

#### 릴레이션과 테이블
릴레이션과 테이블은 같은 의미로 사용된다. 다만 릴레이션은 수학의 집합이론에 기초하기 때문에 속성이나 인스턴스의 중복을 허용하지 않는다.
릴레이션은 주로 구조를 강조하는 의미로 이론을 설명할 때 많이 사용하고, 테이블은 데이터를 강조하는 의미로 실무에서 많이 사용한다.
<br/>
<br/>
## 3. 릴레이션의 특징
관계 데이터 모델은 수학자였던 에드가 코드(Codd) 박사의 영향을 받아 대부분의 정의가 수학적 표현법을 따른다.
이러한 수학적 표현법의 사용으로 논리적인 흐름이 명쾌하다. 릴레이션의 특징은 다음과 같다.

#### 1. 속성은 단일 값을 가진다
각 속성의 값은 도메인에 정의된 값만을 가지며 그 값은 모두 단일 값이어야 한다.<br/>
예를 들어 도메인이 취미의 집합={운동, 등산, 독서, 게임}인 경우 {운동}이나 {독서}와 같이 하나의 값만 가질 수 있으며 {운동, 독서}와 같이 여러 개의 값을 가질 수 없다.
이런 경우는 튜플을 하나 더 만들어 속성의 값이 단일 값이 되도록 나누어야 한다.

#### 2. 속성은 서로 다른 이름을 가진다
속성은 한 릴레이션에서 서로 다른 이름을 가져야만 한다.

#### 3. 한 속성의 값은 모두 같은 도메인 값을 가진다
한 속성에 속한 열은 모두 그 속성에서 정의한 도메인 값만 가질 수 있다.

#### 4. 속성의 순서는 상관없다
속성의 순서가 달라도 릴레이션 스키마는 같다. 예를 들어 릴레이션 스키마에서 (이름, 주소) 순으로 속성을 표시하거나 (주소, 이름) 순으로 표시하여도 동일한 것이다.

#### 5. 릴레이션 내의 중복된 튜플은 허용하지 않는다
하나의 릴레이션 인스턴스 내에서는 서로 중복된 값을 가질 수 없다. 즉 모든 튜플은 서로 값이 달라야 한다.

#### 6. 튜플의 순서는 상관없다
튜플의 순서가 달라도 같은 릴레이션이다.
관계 데이터 모델의 튜플은 실제적인 값을 가지고 있으며 이 값은 시간이 지남에 따라 데이터의 삭제, 수정, 삽입에 따라 순서가 바뀔 수 있다.
<br/>
<br/>
#### [릴레이션 생성 및 변경에 관한 SQL 명령어]
관계 데이터 모델의 테이블을 다루는 SQL 명령어는 다음과 같다.
- **CREATE TABLE** : 데이터를 저장하기 위한 테이블(릴레이션)의 구조(스키마)를 정의
- **INSERT** : 생성된 테이블에 데이터(튜플)를 삽입
- **DELETE** : 테이블에 저장된 데이터(튜플)를 삭제
- **UPDATE** : 테이블에 저장된 데이터(튜플)를 수정
- **SELECT** : 테이블에 저장된 데이터(튜플)를 검색
  <br/>

## 4. 관계 데이터 모델
관계 데이터 모델은 데이터를 2차원 테이블 형태인 릴레이션으로 표현하며, 릴레이션에 대한 **제약조건**(constraints)과 관계 연산을 위한 **관계대수**(relational algebra)를 정의한다.
- 1장에서 언급한 마당서점의 예를 들면, 릴레이션은 도서 정보를 담은 '도서' 릴레이션, 고객 정보를 담은 '고객' 릴레이션, 주문내역을 담은 '주문' 릴레이션이다.
  제약조건은 각 릴레이션에 저장된 데이터 값이 가져야하는 제약을 말한다.
  나이는 음수가 되면 안 된다든지, 주문 릴레이션의 고객번호는 고객 릴레이션에서만 참조를 해야 한다든지 하는 규칙이다.
  관계 연산은 릴레이션을 다루는 연산 규칙으로 예를 들면 '주문' 릴레이션과 '고객' 릴레이션 등을 조작하여 특정 고객의 주문 내역을 검색하는 행위 등을 의미한다.

관계 데이터 모델을 컴퓨터 시스템에 구현한 것을 **관계 데이터베이스 시스템**이라고 한다. 관계 데이터베이스 시스템은 관계 데이터 모델에 기초하여 `SQL`을 기반으로 구현된다.
릴레이션의 생성과 관리를 SQL로 수행하고, 릴레이션에 대한 제약조건을 SQL로 표현하며, 릴레이션에서 데이터를 추출하는 연산을 SQL로 표현한다.

#### 관계 데이터베이스 시스템
<img src="https://github.com/silxbro/cs-study/assets/142463332/6e3f764f-b46b-48c1-bb2e-cf2ea447a020" width="500" height="110"/><br/>