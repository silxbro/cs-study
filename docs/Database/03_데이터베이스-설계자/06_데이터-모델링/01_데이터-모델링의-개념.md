# 데이터 모델링의 개념
<br/>

데이터 모델링을 건축에 비유하면 지반 설계를 하는 것과 같다. 지반 설계가 잘못되면 건물을 아무리 튼튼하게 짓는다고 해도 오래갈 수 없다.
소프트웨어 개발 역시 데이터 모델링을 잘못하면 프로젝트 전체가 위험에 빠질 수 있다.
예를 들어 소프트웨어 개발이 다 끝나갈 때 쯤 데이터 모델링이 잘못됐다는 것을 발견하면 처음부터 다시 진행해야 한다.
개발이 잘 종료되었더라도 사용 중에 오류를 발견하면 수습하는 데 많은 비용이 든다.
마당서점 데이터베이스에서 도서 한 권을 찾는 데 10분 이상 걸린다거나, 재고가 없는 도서를 판매 중이라고 안내한다면 종업원과 고객은 혼란에 빠질 것이다.
이러한 시스템은 사용자로부터 신뢰를 잃어 차라리 없는 게 낫다는 평가를 받을지도 모른다.

아래 그림은 현실 세계에 존재하는 개념이 어떻게 데이터베이스로 구축되는지 보여준다. 데이터 모델링은 현실 세계의 복잡한 개념을 단순화하고 추상화시켜 데이터베이스화하는 과정이다.
최종적으로 구축된 데이터베이스는 현실 세계의 대상이 되었던 개념과 일치한다.

#### [데이터 모델링의 개념]
<img src="https://github.com/silxbro/cs-study/assets/142463332/3b46305d-5819-40cb-9795-915d20476e78" width="550" height="300"/><br/>
<br/>
<br/>
## 1. 데이터베이스 생명주기
데이터베이스는 최초 사용자의 요구에 의해 구축되어 사용되다가 필요에 따라 개선 또는 다시 구축되어 사용된다.
이러한 데이터베이스의 생성과 운영에 관련된 특징을 데이터베이스 생명주기(database life cycle)라고 한다. 다음은 데이터베이스 생명주기를 나타낸 것이다.

#### [데이터베이스 생명주기]
<img src="https://github.com/silxbro/cs-study/assets/142463332/503c6c09-8df6-447c-8ddc-4921a0fd34e2" width="330" height="250"/><br/>

#### ❶ 요구사항 수집 및 분석
사용자들의 요구사항을 듣고 분석하여 데이터베이스 구축의 범위를 정하는 단계이다.
- 마당서점의 경우 고객, 운영자, 경영자 등 사용자의 범위와 서비스 수준을 정하는 것을 말한다.

#### ❷ 설계
분석된 요구사항을 기초로 주요 개념과 업무 프로세스 등을 식별하고(개념적 설계), 사용하는 DBMS의 종류에 맞게 변환(논리적 설계)한 후, 데이터베이스 스키마를 도출(물리적 설계)한다.

#### ❸ 구현
설계 단계에서 생성한 스키마를 실제 DBMS에 적용하여 테이블 및 관련 객체(뷰, 인덱스 등)를 만든다.
또한 관련 소프트웨어에 설계한 데이터베이스를 적용하여 서비스를 제공할 수 있도록 프로그램을 완성한다.

#### ❹ 운영
구현된 데이터베이스를 기반으로 소프트웨어를 구축하여 서비스를 제공한다.

#### ❺ 감시 및 개선
데이터베이스 운영에 따른 시스템의 문제를 관찰하고 데이터베이스 자체의 문제점을 파악하여 개선한다.
이 단계에서는 데이터베이스가 지속적으로 운영될 수 있도록 변경 및 유지보수를 한다.
<br/>
<br/>
## 2. 데이터 모델링 과정
데이터베이스 생명주기는 '데이터베이스의 구축-사용-개선-재구축'의 순환 과정으로 이루어진다.
우리가 이 장에서 살펴볼 데이터 모델링은 데이터베이스 생명주기 중 요구사항 수집 및 분석부터 설계까지의 과정을 말한다.
요구사항 수집 및 분석 단계에서는 ① 현실 세계의 대상 및 사용자의 요구사항을 정리하고 분석한다.
설계 단계에서는 ② 중요 개념을 구분한 후(**개념적** 모델링) ③ 각 개념을 구체화하고(**논리적** 모델링) ④ 최종적으로 데이터베이스 생성 계획에 따라 개체, 인덱스 등을
생성(**물리적** 모델링)한다.

#### [데이터 모델링 과정]
<img src="https://github.com/silxbro/cs-study/assets/142463332/56ae2616-ae5e-4642-91c3-fe230380f4d0" width="550" height="330"/><br/>

데이터 모델링의 각 과정에 대해 자세히 살펴보자.

### 요구사항 수집 및 분석
데이터베이스 구축을 위한 첫 단계로, 현실 세계를 파악하고 사용자의 요구사항을 수집 및 분석하는 단계이다. 앞으로 진행 방향이 이 단계에서 결정되므로 매우 중요하다.
담당자는 구축할 데이터베이스와 관련된 전문적인 지식을 갖추고 있어야 하며, 관련 자료를 수집할 때도 가장 기초적인 내용에 중점을 두고 진행해야 한다.
일반적으로 요구사항 수집을 위해 다음과 같은 방법이 많이 사용된다.
- **실제 문서를 수집하고 분석한다**
    - 문서의 경우 기록으로 남기기 위해 만드는 자료이기 때문에 데이터베이스로 관리할 우선대상일 가능성이 가장 높다.
- **담당자와의 인터뷰나 설문조사를 통해 요구사항을 직접 수렴한다**
    - 실제로 데이터베이스를 사용할 담당자에게 직접 요구사항을 수렴하는 방법이다.
      이때 담당자와 분석가 사이에 의사소통이 원활하게 이루어지지 않으면 잘못된 요구사항이 수집되어 결과적으로 잘못된 데이터베이스를 설계할 수 있다.
      그러므로 분석가는 담당자의 의도를 정확하게 파악하도록 노력해야 한다.
      분석가가 해당 업무에 대해 전문적인 지식이 없다면, 관련 업무의 신입사원이 되었다고 가정하고 업무에 대해 하나씩 배운다는 생각으로 인터뷰하는 것도 좋은 방법이다.
- **비슷한 업무를 처리하는 기존의 데이터베이스를 분석한다**
    - 구축하려는 데이터베이스와 유사한 시스템이 있다면 그 시스템을 참고하여 요구사항을 파악한다.
- **각 업무와 연관된 모든 부문을 살펴본다**
    - 일반적으로 한 가지 업무가 단독으로 처리되는 경우는 드물다. 대부분 서로 연관성을 가지고 처리되므로 처리하려는 업무나 대상의 전체를 보면서 요구사항을 수집 및 분석한다.

사용자의 요구사항은 대부분 모호하며 사용자마다 쓰는 용어도 달라 개념을 명확하게 파악하기 어렵다.
수집된 자료는 이러한 모호성을 제거하고 최대한 구체적으로 명확하게 정리해야 한다.
또한 분석 과정을 거쳐 필요로 하는 정보와 업무 처리 절차를 도출하여 다음 단계에서 활용할 수 있도록 한다.

### 개념적 모델링
개념적 모델링(conceptual modeling)은 요구사항을 수집하고 분석한 결과를 토대로 업무의 핵심적인 개념을 구분하고 전체적인 뼈대를 만드는 과정이다.
여기서 핵심적인 개념을 구분한다는 것은 개체(entity)를 추출하고 각 개체들 간의 관계(relation)를 정의하여 ER 다이어그램(ERD, Entity-Relationship Diagram)을 만드는
과정까지를 말한다. 간략하게 설명하면 개체는 구체적으로 표현할 수 있는 실체이며, ER 다이어그램은 이러한 실체들의 관계를 표현한 것이다.

#### [개념적 모델링의 예]
<img src="https://github.com/silxbro/cs-study/assets/142463332/a30b0390-5f3c-4f8c-8c56-fc545c6585b3" width="500" height="150"/><br/>

설계자는 사용자의 요구사항을 분석하여 가장 핵심적인 개체와 개별 개체를 식별할 수 있는 핵심 속성(PK), 그리고 각 개체 간의 관계를 정의하여 데이터베이스화 할 수 있는
일반적인 개념으로 표현한다.

개념적 모델링은 건물의 기본 골조를 만드는 과정과 같이 데이터베이스의 큰 골격을 만드는 과정이다.
따라서 완성된 ER 다이어그램이 사용자의 요구사항을 제대로 반영하였는지, 또 업무 처리 절차에는 문제가 없었는지 등을 점검하여 잘못된 ER 다이어그램과 업무 처리 절차에
대해서 수정을 한다.
- ER 다이어그램을 너무 구체적으로 작성할 필요는 없다. 모든 속성을 포함하면 오히려 복잡성이 증가하여 사용자들이 알아보기 어렵고 핵심적인 부분을 놓칠 수도 있기 때문이다.

### 논리적 모델링
논리적 모델링(logical modeling)은 개념적 모델링에서 만든 ER 다이어그램을 사용하고자 하는 DBMS에 맞게 **사상**(**매핑**(mapping))하여 실제 데이터베이스로 구현하기 위한
모델을 만드는 과정이다.
ER 다이어그램은 DBMS의 특성에 따라 관계 데이터 모델, 네트워크 데이터 모델, 계층 데이터 모델 등으로 사상이 이루어진다.

#### [논리적 모델링의 예]
<img src="https://github.com/silxbro/cs-study/assets/142463332/fede1ed0-90f9-4465-a24d-9d8dba7d577d" width="450" height="180"/><br/>

논리적 모델링은 다음의 몇 가지 과정을 거쳐 완성된다.
- **개념적 모델링에서 추출하지 않았던 상세 속성들을 모두 추출한다**
    - 개념적 모델링에서 핵심적인 속성만 추출하였다면, 논리적 모델링에서는 실제 필요한 모든 속성을 추출한다.
        - 예를 들어 개념적 모델링에서 고객의 이름, 주소, 전화번호만 추출하였더라도 실제 마케팅 업무에 사용하려면 나이, 성별 등의 상세한 정보가 필요하므로 논리적 모델링에서
          추출한다.
- **정규화를 수행한다**
    - 여러 개체들이 데이터를 중복 저장하는 문제를 해결하기 위해 정규화를 수행한다.
- **데이터의 표준화를 수행한다**
    - 데이터 용어 사전(dictionary)과 도메인을 정의하여 동일하게 사용되는 용어를 정리하고 데이터의 형태 및 크기 등을 확정한다.

### 물리적 모델링
물리적 모델링(physical modeling)은 작성된 논리적 모델을 실제 컴퓨터의 저장 장치에 저장하기 위한 물리적 구조를 정의하고 구현하는 과정이다.
물리적 모델링을 할 때는 DBMS의 특성에 맞게 저장 구조를 정의하여야 데이터베이스가 최적의 성능을 낼 수 있다.

#### [물리적 모델링의 예]
<img src="https://github.com/silxbro/cs-study/assets/142463332/953477a8-0cd8-4420-9f4b-d9f5707d2fbb" width="450" height="350"/><br/>

다음은 물리적 모델링을 할 때 트랜잭션, 저장 공간 설계 측면에서 고려할 사항이다.
- 트랜잭션은 DBMS가 데이터를 다루는 논리적인 작업의 단위로, 자료의 입력에서부터 처리가 완료될 때까지 일련의 단계를 말한다.
  <br/><br/>
- **응답시간을 최소화해야 한다**
    - 트랜잭션이 시작되어 종료될 때까지 걸리는 시간을 응답시간이라고 한다. 물리적 모델링이 잘못될 경우 응답시간이 오래 걸려 사용자들이 불편을 느낀다.
- **얼마나 많은 트랜잭션을 동시에 발생시킬 수 있는지 검토해야 한다**
    - 데이터베이스가 얼마나 많은 트랜잭션을 동시에 발생시킬 수 있느냐는 시스템 전체의 성능에 영향을 미친다. 따라서 트랜잭션을 효율적으로 분산시킬 수 있는 전략이 필요하다.
- **데이터가 저장될 공간을 효율적으로 배치해야 한다**
    - DBMS에 따라 다양한 저장 방법이 있으므로 저장될 데이터의 특성을 파악하여 저장 방법을 결정한다.
      또한 데이터의 사용 형태에 따라 검색을 위한 인덱스(index)를 설계하여 최적의 성능을 낼 수 있도록 한다.